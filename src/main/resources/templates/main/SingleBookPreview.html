<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" >
<!=== Head in Thymeleaf - Fragments ===>
<head th:replace="partials/head.html :: head ('Single Book')" ></head>
<body>

<!===== Navbar =====>
<nav th:replace="partials/loginNavbar :: LoggedIn-Navbar"></nav>


<div class="main-single-book-container">
    <!=== Left Side Book Information===>
    <div id="left-side-book-container" class="">
        <!=== Book Image===>
        <img class="single-book-cover"
             th:src="${singleBookInfo.getCover_page()}"
             th:alt="${singleBookInfo.getTitle()}"
             th:if="${singleBookInfo.getCover_page() != ''}"
             onerror="this.style.display='none';"
        />
        <img class="single-book-cover-noIMG"
             th:src="${singleBookInfo.getCover_page() != '' ? singleBookInfo.getCover_page() : @{/img/noImage.jpeg}}"
             th:alt="${singleBookInfo.getTitle()}"
             th:if="${singleBookInfo.getCover_page() == ''}"
        />

        <!=== Liked Book Button===>
        <a href="#" class="liked-book-btn">
            <img th:src="@{/img/heart.png}" alt="Liked Books" class="liked-book-image">
            <span>Favorite Book</span>
        </a>
        <!=== Purchase Button===>
        <a th:href="${singleBookInfo.getGoogle_play()}" class="purchase-book-btn">Purchase Ebook</a>
    </div>
    <!=== Right Side - Book Information, Other Books in Genre, Reviews===>
    <div id="right-side-book-info-container" class="">
        <!=== Book Information ===>
        <div id="single-book-info-container" class="">
            <h2 th:text="${singleBookInfo.getTitle()}" id="single-book-title">title of Book</h2>
            <p th:text="${singleBookInfo.getAuthor()}" class="single-book-author">Author</p>
            <section th:switch="${singleBookInfo.getRating()}" class="">
                <img th:case="'0'" th:src="@{/img/ratings/noStar.png}" th:alt="${singleBookInfo.getRating()}" class="single-book-rating">
                <img th:case="'1'" th:src="@{/img/ratings/oneStar.png}" th:alt="${singleBookInfo.getRating()}" class="single-book-rating">
                <img th:case="'2'" th:src="@{/img/ratings/twoStar.png}" th:alt="${singleBookInfo.getRating()}" class="single-book-rating">
                <img th:case="'3'" th:src="@{/img/ratings/threeStar.png}" th:alt="${singleBookInfo.getRating()}" class="single-book-rating">
                <img th:case="'4'" th:src="@{/img/ratings/fourStars.png}" th:alt="${singleBookInfo.getRating()}" class="single-book-rating">
                <img th:case="'5'" th:src="@{/img/ratings/fiveStars.png}" th:alt="${singleBookInfo.getRating()}" class="single-book-rating">
            </section>
            <p th:text="${singleBookInfo.getDescription()}" class="single-book-description">description</p>
            <p th:text="${singleBookInfo.getGenre()}" class="single-book-genre">Genre</p>
            <p class="single-book-page-count"><span th:text="${singleBookInfo.getPage_count()}"></span> pages</p>
            <p class="single-book-page-date pb-2">First published <span th:text="${singleBookInfo.getDate_published()}"></span></p>
            <p class="single-book-page-ISBN">ISBN: <span th:text="${singleBookInfo.getIsbn()}"></span>ISBN</p>
        </div>

        <!=== Books in the Same Genre ===>
        <div class="services section-bg pt-5">
            <div class="container">
                <!==== Title ====>
                <div class="section-title p-0 m-0">
                    <h2>Same Genre Books</h2>
                </div>
                <div class="position-relative p-0 m-0">
                    <!===== Book Section =====>
                    <section class="d-flex overflow-scroll container position-relative p-0 m-0" >
                        <section class="mx-3 single-book-genre-container p-0 m-0 mb-5" th:each="book:${bookGenre}">
                            <a th:href="@{/singleBook/{id}(id = ${book.id})}" >
                                <section th:if="${book.getTitle() != singleBookInfo.getTitle()}">
                                    <img th:src="${book.getCover_page()}" th:alt="${book.getTitle()}" class="cover-page">
                                    <p class="single-book-genre-info-container">
                                        <span th:text="${book.getTitle()}" class="book-title">Title of Book</span> <br />
                                        <small>By </small><small th:text="${book.getAuthor()}" class="\">Title of Book</small>
                                    </p>
                                </section>
                            </a>
                        </section>
                    </section>
                </div>
            </div>
        </div>


        <!=== Book Reviews ===>
        <div class="services section-bg py-5">
            <!==== Title ====>
            <div class="section-title p-0 m-0">
                <h2>Reviews</h2>
            </div>
            <div class="container-fluid whole-review-container">
                <div class="review-container" th:each="review:${bookReview}">
                    <!===== Book Review Username and Profile IMG =====>
                    <section class="">
                        <img class="review-user-profile-img" th:src="${review.user.getProfilePicturePath()}" th:if="${review.user.getProfilePicturePath() != ''}" th:alt="${review.user.username}" />
                        <img class="review-user-profile-img" th:src="@{/img/noProfileImage.png}" th:if="${review.user.profilePicturePath == ''}" alt="No Image Provided" />
                        <h5 th:text="${review.user.username}">Username</h5>
                    </section>
                    <!===== Book Review Title Rating & Body =====>
                    <section class="">
                        <h5 th:text="${review.title}">Review Title</h5>
                        <span th:switch="${review.rating}" class="">
                            <img th:case="'0'" th:src="@{img/ratings/noStar.png}" th:alt="${singleBookInfo.getRating()}" class="review-book-rating">
                            <img th:case="'1'" th:src="@{img/ratings/oneStar.png}" th:alt="${singleBookInfo.getRating()}" class="review-book-rating">
                            <img th:case="'2'" th:src="@{img/ratings/twoStars.png}" th:alt="${singleBookInfo.getRating()}" class="review-book-rating">
                            <img th:case="'3'" th:src="@{img/ratings/threeStar.png}" th:alt="${singleBookInfo.getRating()}" class="review-book-rating">
                            <img th:case="'4'" th:src="@{img/ratings/fourStars.png}" th:alt="${singleBookInfo.getRating()}" class="review-book-rating">
                            <img th:case="'5'" th:src="@{img/ratings/fiveStars.png}" th:alt="${singleBookInfo.getRating()}" class="review-book-rating">
                        </span>
                        <p th:text="${review.body}">Review Body</p>
                    </section>
                </div>
            </div>
        </div>



    </div>
</div>


<!=== Footer ===>
<footer th:replace="partials/footer.html :: Footer"></footer>
</body>
</html>